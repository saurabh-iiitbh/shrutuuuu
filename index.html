<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday Shrutuuu üíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&display=swap" rel="stylesheet">
<style>
  :root{--bg1:#ffd5e3;--bg2:#ff9cc9;--text:#fff}
  *{box-sizing:border-box}
  body{
    margin:0;height:100vh;font-family:'Poppins',sans-serif;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    color:var(--text);overflow:hidden;display:flex;align-items:center;justify-content:center;
  }
  .page{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:40px;transition:opacity .6s,transform .6s}
  .hidden{opacity:0;pointer-events:none;transform:scale(.98)}
  h1{font-size:2.2rem;margin:0 0 14px 0}
  .btn{margin-top:22px;background:#fff;color:#ff2f8f;padding:12px 26px;border-radius:28px;border:none;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,.15)}
  .card{width:min(920px,94vw);max-width:920px;min-height:520px;border-radius:18px;padding:24px;display:flex;flex-direction:column;align-items:center;gap:14px;position:relative;overflow:hidden;background:rgba(255,255,255,0.03)}
  .photo-wrap{width:80%;max-width:720px;height:320px;border-radius:12px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))}
  .photo{width:100%;height:100%;object-fit:cover;opacity:0;transform:scale(1.03);transition:opacity .9s,transform .9s,filter .9s;filter: blur(4px) saturate(.9);border-radius:12px}
  .photo.show{opacity:1;transform:scale(1);filter:blur(0) saturate(1.03)}
  .msg{margin-top:10px;font-size:1.2rem;text-align:center;max-width:86%;line-height:1.4;opacity:0;transform:translateY(18px);transition:opacity .6s,transform .6s}
  .msg.show{opacity:1;transform:translateY(0);text-shadow:0 0 12px rgba(255,255,255,.12),0 0 28px rgba(255,120,180,.22)}
  .msg.glow-strong{animation:strongGlow 1.6s infinite alternate;font-weight:700}
  @keyframes strongGlow{from{text-shadow:0 0 16px rgba(255,255,255,.12),0 0 28px rgba(255,120,180,.24)}to{text-shadow:0 0 28px rgba(255,255,255,.22),0 0 54px rgba(255,100,170,.36)}}
  .controls{position:absolute;right:18px;bottom:18px;display:flex;gap:10px}
  .control-btn{background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
  .status{position:absolute;left:18px;bottom:16px;background:rgba(0,0,0,0.18);padding:8px 10px;border-radius:8px;font-size:0.9rem}
  .placeholder{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:linear-gradient(135deg,#ffe9f3,#ffd8ea);color:#333;font-weight:700}
  @media(max-width:720px){.photo-wrap{height:240px}.msg{font-size:1rem}.card{min-height:420px;padding:16px}}
</style>
</head>
<body>

<!-- Page 1 -->
<div id="page1" class="page" aria-hidden="false">
  <h1>üéÇ Happy Birthday Shrutuuu üíñ</h1>
  <img src="Snapchat-1200061843.jpg" alt="flower" width="130" style="border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.15)">
  <button class="btn" id="revealBtn">Click to Reveal Message</button>
  <div style="margin-top:10px;font-size:.95rem;opacity:.95">(Tap to start slideshow & music)</div>
</div>

<!-- Page 2 -->
<div id="page2" class="page hidden" aria-hidden="true">
  <div class="card">
    <div style="font-weight:800;font-size:1.1rem;opacity:.95">üíù For My Dearest Shrutuuu üíù</div>
    <div class="photo-wrap" id="photoWrap">

      <img id="photoEl" class="photo" src="" alt="photo" style="position:absolute;inset:0">
    </div>

    <div id="msgEl" class="msg"></div>

    <div class="controls" id="controls">
      <button class="control-btn" id="pauseBtn">Pause Music</button>
      <button class="control-btn" id="replayBtn">Replay</button>
      <button class="control-btn" id="skipBtn">Skip</button>
    </div>

    <div class="status" id="status">Ready</div>
  </div>

  <!-- audio: replace 'music.mp3' with your file name -->
  <audio id="bgm" src="Ehsaas.mp3" preload="auto"></audio>
</div>

<script>
/* ====== CONFIG: Replace filenames/URLs here ====== */
const photos = [
  "Snapchat-904150657.jpg",
  "Snapchat-1187243242.jpg",
  "Snapchat-915564888.jpg",
  "Snapchat-1072465949.jpg"
];
const messages = [
  "üå∏ You make the world brighter with your smile üí´",
  "üíñ Every moment with you feels magical ‚Äî thankful for you!",
  "üéÇ May your day be as sweet and beautiful as you are üå∑",
  "‚ú® You‚Äôre my brightest blessing ‚Äî happy birthday, Shrutuuu üíï"
];
/* ============================================== */

const FADE_IN = 900, HOLD = 2600, FADE_OUT = 800, BETWEEN = 300;
const revealBtn = document.getElementById('revealBtn');
const page1 = document.getElementById('page1');
const page2 = document.getElementById('page2');
const photoEl = document.getElementById('photoEl');
const photoHolder = document.getElementById('photoHolder');
const msgEl = document.getElementById('msgEl');
const bgm = document.getElementById('bgm');
const pauseBtn = document.getElementById('pauseBtn');
const replayBtn = document.getElementById('replayBtn');
const skipBtn = document.getElementById('skipBtn');
const status = document.getElementById('status');

let index = 0, running = false, timers = [];

/* helper to update visible status */
function setStatus(text, isError=false){
  status.textContent = text;
  status.style.background = isError ? "rgba(255,80,90,0.18)" : "rgba(0,0,0,0.18)";
  console.log(text);
}

/* clear timeouts */
function clearTimers(){ timers.forEach(t => clearTimeout(t)); timers=[]; }

/* handle image load errors gracefully */
photoEl.onerror = function(){
  console.warn("Image failed to load:", photoEl.src);
  photoHolder.textContent = "Image not found";
  photoHolder.style.display = "flex";
  photoEl.classList.remove('show');
  setStatus("Some images failed to load (check filenames).", true);
};

/* show single slide */
function showSlide(i){
  return new Promise(resolve => {
    setStatus(`Showing ${i+1}/${photos.length}`);
    // reset visibility
    photoEl.classList.remove('show');
    msgEl.classList.remove('show','glow-strong');
    photoHolder.style.display = "flex";
    photoHolder.textContent = "Loading image...";
    photoEl.src = ""; // reset
    // small delay then set src
    timers.push(setTimeout(()=>{
      const src = photos[i];
      photoEl.src = src;
      // if image loads, onload will fire
      photoEl.onload = () => {
        photoHolder.style.display = "none";
        photoEl.classList.add('show');
        // show message after small delay
        timers.push(setTimeout(()=>{
          msgEl.textContent = messages[i] || "";
          msgEl.classList.add('show');
        }, FADE_IN * 0.45));
      };
      // fallback if onload doesn't run quickly (cached)
      timers.push(setTimeout(()=>{
        if(!photoEl.classList.contains('show')){
          photoHolder.style.display = "none";
          photoEl.classList.add('show');
          if(!msgEl.classList.contains('show')){
            msgEl.textContent = messages[i] || "";
            msgEl.classList.add('show');
          }
        }
      }, FADE_IN + 160));
      // schedule fade out
      const totalVisible = FADE_IN + HOLD;
      timers.push(setTimeout(()=>{
        photoEl.classList.remove('show');
        msgEl.classList.remove('show');
      }, totalVisible));
      // resolve after fade out
      timers.push(setTimeout(()=>resolve(), FADE_IN + HOLD + FADE_OUT + BETWEEN));
    }, 80));
  });
}

/* main sequence */
async function runSequence(start=0){
  running = true;
  index = start;
  setStatus("Slideshow started");
  // play music
  try { bgm.currentTime = 0; await bgm.play(); pauseBtn.textContent = 'Pause Music'; }
  catch(err){ setStatus("Music didn't autoplay; use Play/Pause control", true); pauseBtn.textContent = 'Play Music'; console.warn(err); }
  while(running && index < photos.length){
    await showSlide(index);
    index++;
  }
  if(running){
    // final display: last slide glowing
    const last = Math.min(photos.length-1, index-1);
    photoEl.src = photos[last];
    photoHolder.style.display = "none";
    photoEl.classList.add('show');
    msgEl.textContent = messages[last] || "";
    msgEl.classList.add('show','glow-strong');
    setStatus("Slideshow finished ‚Äî use Replay to play again");
  }
}

/* reveal click starts slideshow + shows page2 */
revealBtn.addEventListener('click', ()=>{
  page1.classList.add('hidden');
  page2.classList.remove('hidden');
  page2.setAttribute('aria-hidden','false');
  createSparkles(18);
  clearTimers();
  runSequence(0);
});

/* controls */
pauseBtn.addEventListener('click', ()=>{
  if(bgm.paused){ bgm.play().then(()=>pauseBtn.textContent='Pause Music').catch(()=>pauseBtn.textContent='Play Music'); }
  else { bgm.pause(); pauseBtn.textContent='Play Music'; }
});
replayBtn.addEventListener('click', ()=>{
  clearTimers();
  photoEl.classList.remove('show');
  msgEl.classList.remove('show','glow-strong');
  runSequence(0);
});
skipBtn.addEventListener('click', ()=>{
  clearTimers();
  if(index < photos.length-1) index++;
  runSequence(index);
});

/* simple sparkles */
function createSparkles(n=14){
  for(let i=0;i<n;i++){
    const s = document.createElement('div');
    s.className='sparkle';
    s.style.left = Math.random()*window.innerWidth+'px';
    s.style.top = (Math.random()*0.6+0.08)*window.innerHeight+'px';
    s.style.width = (6+Math.random()*6)+'px';
    s.style.height = s.style.width;
    document.body.appendChild(s);
    const dur = 2200 + Math.random()*2600;
    s.animate([{opacity:0,transform:'translateY(6px) scale(.6)'},{opacity:1,transform:'translateY(0) scale(1)'},{opacity:0,transform:'translateY(-40px) scale(.8)'}],{duration:dur,iterations:Infinity,easing:'ease-out',delay:Math.random()*1000});
  }
}

/* helpful console message */
console.log("Birthday slideshow loaded. If images/music fail, check filenames and open DevTools Console (F12) for errors.");
</script>
</body>
</html>
